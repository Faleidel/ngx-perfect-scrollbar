{"version":3,"file":"perfect-scrollbar.component.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Subject, merge, fromEvent } from 'rxjs';\r\n\r\nimport { map, takeUntil, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { NgZone, Inject, Component,\r\n  OnInit, OnDestroy, DoCheck, Input, Output, EventEmitter, HostBinding,\r\n  ViewChild, ViewEncapsulation, ChangeDetectorRef } from '@angular/core';\r\n\r\nimport { PerfectScrollbarDirective } from './perfect-scrollbar.directive';\r\n\r\nimport { PerfectScrollbarEvent, PerfectScrollbarEvents,\r\n  PerfectScrollbarConfigInterface } from './perfect-scrollbar.interfaces';\r\n\r\n@Component({\r\n  selector: 'perfect-scrollbar',\r\n  exportAs: 'ngxPerfectScrollbar',\r\n  templateUrl: '../../dist/lib/perfect-scrollbar.component.html',\r\n  styleUrls: [ '../../dist/lib/perfect-scrollbar.component.css' ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class PerfectScrollbarComponent implements OnInit, OnDestroy, DoCheck {\r\n  public states: any = {};\r\n\r\n  public indicatorX: boolean = false;\r\n  public indicatorY: boolean = false;\r\n\r\n  public interaction: boolean = false;\r\n\r\n  private scrollPositionX: number = 0;\r\n  private scrollPositionY: number = 0;\r\n\r\n  private scrollDirectionX: number = 0;\r\n  private scrollDirectionY: number = 0;\r\n\r\n  private usePropagationX: boolean = false;\r\n  private usePropagationY: boolean = false;\r\n\r\n  private allowPropagationX: boolean = false;\r\n  private allowPropagationY: boolean = false;\r\n\r\n  private stateTimeout: number | null = null;\r\n\r\n  private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n  private readonly stateUpdate: Subject<string> = new Subject();\r\n\r\n  @Input() disabled: boolean = false;\r\n\r\n  @Input() usePSClass: boolean = true;\r\n\r\n  @HostBinding('class.ps-show-limits')\r\n  @Input() autoPropagation: boolean = false;\r\n\r\n  @HostBinding('class.ps-show-active')\r\n  @Input() scrollIndicators: boolean = false;\r\n\r\n  @Input() config?: PerfectScrollbarConfigInterface;\r\n\r\n  @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @ViewChild(PerfectScrollbarDirective) directiveRef?: PerfectScrollbarDirective;\r\n\r\n  constructor(private zone: NgZone, private cdRef: ChangeDetectorRef,\r\n    @Inject(PLATFORM_ID) private platformId: Object) {}\r\n\r\n  ngOnInit(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      this.stateUpdate\r\n        .pipe(\r\n          takeUntil(this.ngDestroy),\r\n          distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\r\n        )\r\n        .subscribe((state: string) => {\r\n          if (this.stateTimeout && typeof window !== 'undefined') {\r\n            window.clearTimeout(this.stateTimeout);\r\n\r\n            this.stateTimeout = null;\r\n          }\r\n\r\n          if (state === 'x' || state === 'y') {\r\n            this.interaction = false;\r\n\r\n            if (state === 'x') {\r\n              this.indicatorX = false;\r\n\r\n              this.states.left = false;\r\n              this.states.right = false;\r\n\r\n              if (this.autoPropagation && this.usePropagationX) {\r\n                this.allowPropagationX = false;\r\n              }\r\n            } else if (state === 'y') {\r\n              this.indicatorY = false;\r\n\r\n              this.states.top = false;\r\n              this.states.bottom = false;\r\n\r\n              if (this.autoPropagation && this.usePropagationY) {\r\n                this.allowPropagationY = false;\r\n              }\r\n            }\r\n          } else {\r\n            if (state === 'left' || state === 'right') {\r\n              this.states.left = false;\r\n              this.states.right = false;\r\n\r\n              this.states[state] = true;\r\n\r\n              if (this.autoPropagation && this.usePropagationX) {\r\n                this.indicatorX = true;\r\n              }\r\n            } else if (state === 'top' || state === 'bottom') {\r\n              this.states.top = false;\r\n              this.states.bottom = false;\r\n\r\n              this.states[state] = true;\r\n\r\n              if (this.autoPropagation && this.usePropagationY) {\r\n                this.indicatorY = true;\r\n              }\r\n            }\r\n\r\n            if (this.autoPropagation && typeof window !== 'undefined') {\r\n              this.stateTimeout = window.setTimeout(() => {\r\n                this.indicatorX = false;\r\n                this.indicatorY = false;\r\n\r\n                this.stateTimeout = null;\r\n\r\n                if (this.interaction && (this.states.left || this.states.right)) {\r\n                  this.allowPropagationX = true;\r\n                }\r\n\r\n                if (this.interaction && (this.states.top || this.states.bottom)) {\r\n                  this.allowPropagationY = true;\r\n                }\r\n\r\n                this.cdRef.markForCheck();\r\n              }, 500);\r\n            }\r\n          }\r\n\r\n          this.cdRef.markForCheck();\r\n          this.cdRef.detectChanges();\r\n        });\r\n\r\n      this.zone.runOutsideAngular(() => {\r\n        if (this.directiveRef) {\r\n          const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n          fromEvent<WheelEvent>(element, 'wheel')\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((event: WheelEvent) => {\r\n              if (!this.disabled && this.autoPropagation) {\r\n                const scrollDeltaX = event.deltaX;\r\n                const scrollDeltaY = event.deltaY;\r\n\r\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n              }\r\n            });\r\n\r\n          fromEvent<TouchEvent>(element, 'touchmove')\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((event: TouchEvent) => {\r\n              if (!this.disabled && this.autoPropagation) {\r\n                const scrollPositionX = event.touches[0].clientX;\r\n                const scrollPositionY = event.touches[0].clientY;\r\n\r\n                const scrollDeltaX = scrollPositionX - this.scrollPositionX;\r\n                const scrollDeltaY = scrollPositionY - this.scrollPositionY;\r\n\r\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n\r\n                this.scrollPositionX = scrollPositionX;\r\n                this.scrollPositionY = scrollPositionY;\r\n              }\r\n            });\r\n\r\n            merge(\r\n              fromEvent(element, 'ps-scroll-x')\r\n                .pipe(map((event: any) => event.state = 'x')),\r\n              fromEvent(element, 'ps-scroll-y')\r\n                .pipe(map((event: any) => event.state = 'y')),\r\n              fromEvent(element, 'ps-x-reach-end')\r\n                .pipe(map((event: any) => event.state = 'right')),\r\n              fromEvent(element, 'ps-y-reach-end')\r\n                .pipe(map((event: any) => event.state = 'bottom')),\r\n              fromEvent(element, 'ps-x-reach-start')\r\n                .pipe(map((event: any) => event.state = 'left')),\r\n              fromEvent(element, 'ps-y-reach-start')\r\n                .pipe(map((event: any) => event.state = 'top')),\r\n            )\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((event: any) => {\r\n              if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\r\n                this.stateUpdate.next(event.state);\r\n              }\r\n            });\r\n        }\r\n      });\r\n\r\n      window.setTimeout(() => {\r\n        PerfectScrollbarEvents.forEach((eventName: PerfectScrollbarEvent) => {\r\n          if (this.directiveRef) {\r\n            this.directiveRef[eventName] = this[eventName];\r\n          }\r\n        });\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      this.ngDestroy.next();\r\n      this.ngDestroy.unsubscribe();\r\n\r\n      if (this.stateTimeout && typeof window !== 'undefined') {\r\n        window.clearTimeout(this.stateTimeout);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      if (!this.disabled && this.autoPropagation && this.directiveRef) {\r\n        const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n        this.usePropagationX = element.classList.contains('ps--active-x');\r\n\r\n        this.usePropagationY = element.classList.contains('ps--active-y');\r\n      }\r\n    }\r\n  }\r\n\r\n  private checkPropagation(event: any, deltaX: number, deltaY: number): void {\r\n    this.interaction = true;\r\n\r\n    const scrollDirectionX = (deltaX < 0) ? -1 : 1;\r\n    const scrollDirectionY = (deltaY < 0) ? -1 : 1;\r\n\r\n    if ((this.usePropagationX && this.usePropagationY) ||\r\n        (this.usePropagationX && (!this.allowPropagationX ||\r\n        (this.scrollDirectionX !== scrollDirectionX))) ||\r\n        (this.usePropagationY && (!this.allowPropagationY ||\r\n        (this.scrollDirectionY !== scrollDirectionY))))\r\n    {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (!!deltaX) {\r\n      this.scrollDirectionX = scrollDirectionX;\r\n    }\r\n\r\n    if (!!deltaY) {\r\n      this.scrollDirectionY = scrollDirectionY;\r\n    }\r\n\r\n    this.stateUpdate.next('interaction');\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n"]}